<?php/*admin jokhn book upload korbe tokhn kisu validation korenicci ei file e*/if (!empty($_POST)) {//    $msg = array();    $msg='';    if (empty($_POST['name']) || empty($_POST['description'])        || empty($_POST['publisher']) || empty($_POST['edition']) || empty($_POST['isbn']) ||        empty($_POST['pages']) || empty($_POST['price'])) {//        $msg[] = "Please full fill all requirement";        $msg.= '<p style="color:red;font-size: 23px; font-weight: bold;"> Please fill up all the fields</p>';    }    if (!(is_numeric($_POST['price']))) {//        $msg[] = 'Price must be in Numeric  Format...';        $msg.= '<p style="color:red;font-size: 23px; font-weight: bold;">Price must be in Numeric  Format...</p>';    }    if (!(is_numeric($_POST['pages']))) {//        $msg[] = 'Page must be in Numeric  Format...';        $msg.= '<p style="color:red;font-size: 23px; font-weight: bold;">Page must be in Numeric  Format...</p>';    }    if (empty($_FILES['img']['name']))    {//        $msg[] = 'Please provide a image for your book.';         $msg.= '<p style="color:red;font-size: 23px; font-weight: bold;">Page must be in Numeric  Format...</p>';    }    if ($_FILES['img']['error'] > 0)    {//        $msg[] = 'Error uploading image';        $msg.='<p style="color:red;font-size: 23px; font-weight: bold;">Error uploading image(Image size maybe too large).</p>';    }            if (!(strtoupper(substr($_FILES['img']['name'], -4)) == ".JPG" || strtoupper(substr($_FILES['img']['name'], -5)) == ".JPEG"        || strtoupper(substr($_FILES['img']['name'], -4)) == ".GIF" || strtoupper(substr($_FILES['img']['name'], -4)) == ".PNG" ))    {//        $msg[] = 'wrong image file  type(supported formats are .jpg, .jpeg, .gif, .png)';        $msg.= '<p style="color:red;font-size: 23px; font-weight: bold;">wrong image file  type(supported formats are .jpg, .jpeg, .gif, .png)</p>';    }    if (file_exists("../upload_image/" . $_FILES['img']['name']))    {//        $msg[] = 'File already uploaded. Please do not upload with a same name';        $msg .= '<p style="color:red;font-size: 23px; font-weight: bold;">File already uploaded. Please do not upload with a same name</p>';    }    if (empty($_FILES['ebook']['name']))    {//        $msg[] = 'Please upload a book.';        $msg .= '<p style="color:red;font-size: 23px; font-weight: bold;">Please upload a book.</p>';    }    if ($_FILES['ebook']['error'] > 0)    {//        $msg[] = 'Error uploading book.';         $msg .= '<p style="color:red;font-size: 23px; font-weight: bold;">Error uploading book.</p>';    }    if (!(strtoupper(substr($_FILES['ebook']['name'], -4)) == ".PDF"        || strtoupper(substr($_FILES['ebook']['name'], -4)) == ".PPT"        || strtoupper(substr($_FILES['ebook']['name'], -5)) == ".PPTX"        || strtoupper(substr($_FILES['ebook']['name'], -4)) == ".DOC"        || strtoupper(substr($_FILES['ebook']['name'], -4)) == ".TXT"        || strtoupper(substr($_FILES['ebook']['name'], -5)) == ".DOCX"))    {//        $msg[] = 'wrong document file  type(supported formats are .pdf, .ppt, .pptx, .doc, .txt, .docx)';        $msg .= '<p style="color:red;font-size: 23px; font-weight: bold;">wrong document file  type(supported formats are .pdf, .ppt, .pptx, .doc, .txt, .docx)</p>';    }    if (file_exists("../upload_ebook/" . $_FILES['ebook']['name']))    {        $msg .= '<p style="color:red;font-size: 23px; font-weight: bold;">Document File already uploaded. Please do not upload with the same name</p>';    }    if (!empty($msg)) {        /*echo '<p style="color:red;        margin-top: 30px;        text-align: center;         font-size: 22px;">         <b >Error:-</b></p>';        foreach ($msg as $k) {            echo '<li style="color:red;            font-weight: bold;list-style: none;            margin-bottom: 5px;            text-align: center;">'. $k;        }*/            header("location:addbook.php?errors=".$msg);    } else {        move_uploaded_file($_FILES['img']['tmp_name'], "../upload_image/" . $_FILES['img']['name']);        $b_img = "upload_image/" . $_FILES['img']['name'];        move_uploaded_file($_FILES['ebook']['tmp_name'], "../upload_ebook/" . $_FILES['ebook']['name']);        $b_pdf = "upload_ebook/" . $_FILES['ebook']['name'];        $b_nm = $_POST['name'];        $b_cat = $_POST['cat'];        $b_desc = $_POST['description'];        $b_edition = $_POST['edition'];        $b_publisher = $_POST['publisher'];        $b_isbn = $_POST['isbn'];        $b_pages = $_POST['pages'];        $b_price = $_POST['price'];        $db = new mysqli("localhost", "root", "", "matrixmp_cent_db") or die("Can't Connect to database");        //prepare statement starts here        /*$sql = 'insert into book(b_nm,b_subcat,b_desc,b_edition,b_publisher,b_isbn,b_page,b_price,b_img,b_pdf)			values(?,?,?,?,?,?,?,?,?,?)';        $statement = $db->prepare($sql);        $statement->bind_param("ssssssiiiss",$b_nm,$b_cat,$b_desc,$b_edition,$b_publisher,$b_isbn,$b_isbn,$b_pages,$b_price,            $b_img,$b_pdf);        $statement->execute();        $statement->close();        $db->close();*/        //prepare statements ends here        $query = "insert into book(b_nm,b_subcat,b_desc,b_edition,b_publisher,b_isbn,b_page,b_price,b_img,b_pdf)			values('$b_nm','$b_cat','$b_desc','$b_edition','$b_publisher','$b_isbn',$b_pages,$b_price,'$b_img','$b_pdf')";        $db->query($query) or die($query . "Can't Connect to Query...");//        header("location:addbook.php");        header('location: addbook.php?okk=1');    }} else {    header("location:index.php");}?>		